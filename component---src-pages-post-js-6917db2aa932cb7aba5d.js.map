{"version":3,"sources":["webpack:///./src/pages/post.js","webpack:///./src/utils/dao.js"],"names":["Post","useState","post","setPost","POST_PARAMS","data","content","id","window","location","pathname","split","filter","Boolean","useEffect","fetch","getPostsUrl","then","response","posts","pageContext","offsetHero","photos","src","alt_sizes","url","alt","summary","tags","dangerouslySetInnerHTML","__html","caption","API_KEY","params","next","api_key","POST_URL","Object","keys","map","key","join","encodeParams","endpoint","options","method","headers","ok","status","statusText","json","error","message","Promise","reject","catch"],"mappings":"8FAAA,oEA0CeA,UAjCF,WAAO,IAAD,EACOC,mBAAS,IAA1BC,EADU,KACJC,EADI,KAIXC,GADUC,EAAKC,QACD,CAClBC,GAAsB,oBAAXC,OAAyBA,OAAOC,SAASC,SAASC,MAAM,KAAKC,OAAOC,SAAS,GAAK,KAa/F,OAJAC,qBAAU,WALRC,YAAMC,YAAYZ,IAAca,MAAK,SAACZ,GACpCF,EAAQE,EAAKa,SAASC,MAAM,SAM7B,IAGD,kBAAC,IAAD,CAAQC,YAAaf,GACnB,kBAAC,IAAD,CAAWgB,YAAU,GACnB,6BACGnB,EAAKoB,QACJ,yBAAKC,IAAKrB,EAAKoB,OAAO,GAAGE,UAAU,GAAGC,IAAKC,IAAKxB,EAAKyB,UAEtDzB,EAAK0B,MAAS,4BAAK1B,EAAK0B,KAAK,IAC9B,yBAAKC,wBAAyB,CAAEC,OAAQ5B,EAAK6B,gB,kCCnCvD,wEACMC,EAAU,qDAQHhB,EAAc,SAACiB,EAAaC,GAGvC,YAHgD,IAAtBD,MAAS,IACnCA,EAAOE,QAAUH,EAEVE,EAAI,yBACoBA,EADpB,YACoCF,EACtCI,gEAXiB,SAACH,GAC3B,YAD2C,IAAhBA,MAAS,IAC7BI,OAAOC,KAAKL,GAClBM,KAAI,SAAAC,GAAG,OAAOA,EAAP,IAAcP,EAAOO,MAC5BC,KAAK,KAQeC,CAAaT,IAGvBlB,EAAQ,SAAC4B,EAAeC,GAMnC,YADI,IALgBD,MAAW,SAK3B,IAL+BC,MAAU,CAC7CC,OAAQ,MACRC,QAAS,CACL,eAAgB,qCAGbtC,OAAOO,MAAM4B,EAAUC,GAC3B3B,MAAK,SAACC,GAAc,IAEjB6B,EAIE7B,EAJF6B,GACAC,EAGE9B,EAHF8B,OACAC,EAEE/B,EAFF+B,WACAxB,EACEP,EADFO,IAGF,GAAIsB,EACF,OAAO7B,EAASgC,OAGlB,IAAMC,EAAQ,CACZC,QAAYJ,EAAL,KAAgBC,EAAhB,yBAAmDxB,EAC1DP,WACA8B,SACAC,cAGF,OAAOI,QAAQC,OAAOH,MAEvBI,OAAM,SAACJ,GACN,OAAOE,QAAQC,OAAOH,Q","file":"component---src-pages-post-js-6917db2aa932cb7aba5d.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { fetch, getPostsUrl } from '../utils/dao';\n\n// Components\nimport { Layout, Container } from '../components';\n\n// Data\nimport data from '../data/pages/news.json';\n\nconst Post = () => {\n  const [post, setPost] = useState({});\n\n  const content = data.content;\n  const POST_PARAMS = {\n    id: typeof window !== 'undefined' ? window.location.pathname.split('/').filter(Boolean)[1] : ''\n  };\n\n  const getPost = () => {\n    fetch(getPostsUrl(POST_PARAMS)).then((data) => {\n      setPost(data.response.posts[0]);\n    });\n  };\n\n  useEffect(() => {\n    getPost();\n  }, []);\n\n  return (\n    <Layout pageContext={data}>\n      <Container offsetHero>\n        <div>\n          {post.photos && (\n            <img src={post.photos[0].alt_sizes[3].url} alt={post.summary} />\n          )}\n          {post.tags && (<h2>{post.tags[0]}</h2>)}\n          <div dangerouslySetInnerHTML={{ __html: post.caption }} />\n        </div>\n      </Container>\n    </Layout>\n  );\n};\n\nexport default Post;\n","const POST_URL = 'https://api.tumblr.com/v2/blog/aristowealth.tumblr.com/posts';\nconst API_KEY = 'a9rmrkt46nr8csi1Fkp9VarPafZws8ZQJZyitfTtDWcwB5GhHe';\n\nexport const encodeParams = (params = {}) => {\n  return Object.keys(params)\n  .map(key => `${key}=${params[key]}`)\n  .join('&');\n};\n\nexport const getPostsUrl = (params = {}, next) => {\n  params.api_key = API_KEY;\n\n  return next\n      ? `https://api.tumblr.com${next}&api_key=${API_KEY}`\n      : `${POST_URL}?${encodeParams(params)}`;\n};\n\nexport const fetch = (endpoint = '', options = {\n  method: 'GET',\n  headers: {\n      'Content-Type': 'application/json; charset=utf-8',\n  },\n}) => {\n  return window.fetch(endpoint, options)\n    .then((response) => {\n      const {\n        ok,\n        status,\n        statusText,\n        url,\n      } = response;\n\n      if (ok) {\n        return response.json();\n      }\n\n      const error = {\n        message: `${status}: ${statusText}, failure for call to ${url}`,\n        response,\n        status,\n        statusText,\n      };\n\n      return Promise.reject(error);\n    })\n    .catch((error) => {\n      return Promise.reject(error);\n    });\n}"],"sourceRoot":""}